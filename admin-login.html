<!doctype html>
<html>
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Admin Login</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="header">
    <div class="nav"><a href="index.html">Dashboard</a><a href="qr-generator/index.html">QR Generator</a><a href="scanner/index.html">Scanner</a></div>
  </div>
  <div class="container">
    <h2>Admin Login</h2>
    <p class="hint">Enter PIN to enable admin actions (clear, delete, save employees).</p>
    <input id="pin" type="password" placeholder="Admin PIN">
    <div style="height:12px"></div>
    <button id="loginBtn" class="small-btn">Login</button>
    <p id="msg" class="hint" style="color:red;display:none"></p>
  </div>

<script>
/* Replace with your computed SHA256 hex of PIN */
const STORED_HASH = "8529b9b331e858239ee4975b602456e7e58da5523ed0a9f331a96d499301628b";

async function sha256(message){
  const buf = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(message));
  return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join('');
}
document.getElementById('loginBtn').addEventListener('click', async ()=>{
  const v = document.getElementById('pin').value || '';
  const h = await sha256(v);
  if(h === STORED_HASH){
    localStorage.setItem('admin_logged_in','true');
    // redirect to generator
    window.location.href = 'qr-generator/index.html';
  } else {
    const msg = document.getElementById('msg');
    msg.style.display='block'; msg.textContent='Incorrect PIN';
    setTimeout(()=>msg.style.display='none',2500);
  }
});
</script>
</body>
</html>
